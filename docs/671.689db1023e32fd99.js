"use strict";(self.webpackChunkFreshCart=self.webpackChunkFreshCart||[]).push([[671],{5671:(C,i,d)=>{d.r(i),d.d(i,{AllordersComponent:()=>b});var a=d(1120),c=d(6814),t=d(4769),g=d(9862);let l=(()=>{class n{constructor(e){this._httpClient=e}getOrders(){return this._httpClient.get("https://ecommerce.routemisr.com/api/v1/orders/")}ClearOrders(){return this._httpClient.delete("https://ecommerce.routemisr.com/api/v1/orders/")}static#t=this.\u0275fac=function(o){return new(o||n)(t.LFG(g.eN))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function u(n,r){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.TgZ(8,"td"),t._UZ(9,"img",15),t.qZA()()),2&n){const e=r.$implicit;t.xp6(2),t.Oqu(e.product.title),t.xp6(2),t.Oqu(e.count),t.xp6(2),t.Oqu(t.lcZ(7,5,e.price)),t.xp6(3),t.s9C("alt",e.product.title),t.Q6J("src",e.product.imageCover,t.LSH)}}const p=function(n,r){return{"table-success":n,"table-warning":r}},m=function(n,r){return{"bg-success":n,"bg-danger":r}};function _(n,r){if(1&n&&(t.TgZ(0,"tr",11)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"currency"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.ALo(14,"currency"),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"currency"),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.ALo(22,"date"),t.qZA(),t.TgZ(23,"td")(24,"span",12),t._uU(25),t.qZA()(),t.TgZ(26,"td")(27,"table",13)(28,"thead")(29,"tr")(30,"th"),t._uU(31,"Product"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"Quantity"),t.qZA(),t.TgZ(34,"th"),t._uU(35,"Price"),t.qZA(),t.TgZ(36,"th"),t._uU(37,"Image"),t.qZA()()(),t.TgZ(38,"tbody"),t.YNc(39,u,10,7,"tr",14),t.qZA()()()()),2&n){const e=r.$implicit;t.Q6J("ngClass",t.WLB(22,p,e.isPaid,!e.isPaid)),t.xp6(2),t.Oqu(e._id),t.xp6(2),t.Oqu(e.user.name),t.xp6(2),t.Oqu(e.user.email),t.xp6(2),t.Oqu(e.user.phone),t.xp6(2),t.Oqu(t.lcZ(11,13,e.taxPrice)),t.xp6(3),t.Oqu(t.lcZ(14,15,e.shippingPrice)),t.xp6(3),t.Oqu(t.lcZ(17,17,e.totalOrderPrice)),t.xp6(3),t.Oqu(e.paymentMethodType),t.xp6(2),t.Oqu(t.xi3(22,19,e.paidAt,"short")),t.xp6(3),t.Q6J("ngClass",t.WLB(25,m,e.isPaid,!e.isPaid)),t.xp6(1),t.hij(" ",e.isPaid?"Paid":"Unpaid"," "),t.xp6(14),t.Q6J("ngForOf",e.cartItems)}}function O(n,r){if(1&n&&(t.TgZ(0,"div")(1,"div",2)(2,"h3",3),t._uU(3,"Orders Summary"),t.qZA(),t.TgZ(4,"div",4)(5,"p",5),t._uU(6,"Total Paid Orders: "),t.TgZ(7,"span",6),t._uU(8),t.qZA()(),t.TgZ(9,"p",7),t._uU(10,"Total Unpaid Orders: "),t.TgZ(11,"span",6),t._uU(12),t.qZA()()()(),t.TgZ(13,"table",8)(14,"thead",9)(15,"tr")(16,"th"),t._uU(17,"Order ID"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"User Name"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"User Email"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Phone"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Tax Price"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Shipping Price"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"Total Price"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Payment Method"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"Paid At"),t.qZA(),t.TgZ(34,"th"),t._uU(35,"Status"),t.qZA(),t.TgZ(36,"th"),t._uU(37,"Products"),t.qZA()()(),t.TgZ(38,"tbody"),t.YNc(39,_,40,28,"tr",10),t.qZA()()()),2&n){const e=t.oxw();t.xp6(8),t.Oqu(e.getPaidOrderCount()),t.xp6(4),t.Oqu(e.getUnpaidOrderCount()),t.xp6(27),t.Q6J("ngForOf",e.orders)}}function h(n,r){1&n&&(t.TgZ(0,"div",16)(1,"p",17),t._uU(2,"No orders available."),t.qZA()())}let b=(()=>{class n{constructor(e){this._OrdersService=e,this.orders=[],this.errorMessage=""}ngOnInit(){this._OrdersService.getOrders().subscribe({next:e=>{this.orders=e.data.sort((o,s)=>o.paidAt&&s.paidAt?new Date(s.paidAt).getTime()-new Date(o.paidAt).getTime():0),console.log(e)},error:e=>{console.log("Error:",e),this.errorMessage=e.message||"An error occurred while fetching orders."}})}getPaidOrderCount(){return this.orders.filter(e=>e.isPaid).length}getUnpaidOrderCount(){return this.orders.filter(e=>!e.isPaid).length}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(l))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-all-orders"]],standalone:!0,features:[t.jDz],decls:2,vars:2,consts:[[4,"ngIf"],["class","text-center my-5",4,"ngIf"],[1,"orders-summary","mb-4","d-flex","justify-content-between","align-items-center"],[1,"text-black","fw-bold"],[1,"text-center"],[1,"paid-orders","fw-bold"],[1,"text-main","fw-bold"],[1,"unpaid-orders","fw-bold"],[1,"table","table-striped","table-hover","orders-table"],[1,"thead-dark"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"badge",3,"ngClass"],[1,"table","table-borderless","products-table"],[4,"ngFor","ngForOf"],["width","60","height","60",1,"img-thumbnail",3,"src","alt"],[1,"text-center","my-5"],[1,"text-muted"]],template:function(o,s){1&o&&(t.YNc(0,O,40,3,"div",0),t.YNc(1,h,3,0,"div",1)),2&o&&(t.Q6J("ngIf",s.orders.length>0),t.xp6(1),t.Q6J("ngIf",0===s.orders.length))},dependencies:[c.ez,c.mk,c.sg,c.O5,c.H9,c.uU,a.Bz],styles:[".order-container[_ngcontent-%COMP%]{border:1px solid #ccc;padding:15px;margin-bottom:20px;border-radius:8px;background-color:#f9f9f9}.cart-items-list[_ngcontent-%COMP%]{list-style:none;padding:0}.cart-item[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;padding:10px 0;display:flex;flex-direction:column}.cart-item-details[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.product-image[_ngcontent-%COMP%]{width:100px;height:auto;margin-top:10px;border:1px solid #ddd;border-radius:4px}.paid[_ngcontent-%COMP%]{color:green}.delivered[_ngcontent-%COMP%]{color:#00f}.subcategories-list[_ngcontent-%COMP%]{list-style:none;padding:0}.orders-summary[_ngcontent-%COMP%]{margin-bottom:20px}.orders-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:22px;margin-bottom:10px}.orders-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}.orders-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}.orders-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .orders-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:left;border:1px solid #ddd}.orders-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f4f4f4;color:#333;font-weight:700}.orders-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}.orders-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}.orders-table[_ngcontent-%COMP%]   .paid[_ngcontent-%COMP%]{background-color:#e8f5e9}.orders-table[_ngcontent-%COMP%]   .unpaid[_ngcontent-%COMP%]{background-color:#ffebee}.products-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:10px}.products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px;text-align:left;border:1px solid #ddd}.products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#e0f7fa;color:#00796b}.products-table[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #ddd}.orders-summary[_ngcontent-%COMP%]{padding:1rem;background-color:#f8f9fa;border:1px solid #ddd;border-radius:.5rem}.orders-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:.5rem}.orders-table[_ngcontent-%COMP%]{margin-top:2rem}.orders-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center;background-color:#343a40;color:#fff}.orders-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;text-align:center}.orders-table[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.85rem}.products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem}.products-table[_ngcontent-%COMP%]   .img-thumbnail[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:.25rem}"]})}return n})()}}]);