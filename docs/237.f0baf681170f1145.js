"use strict";(self.webpackChunkFreshCart=self.webpackChunkFreshCart||[]).push([[237],{2237:(f,m,s)=>{s.r(m),s.d(m,{CartComponent:()=>v});var d=s(6814),p=s(1120),t=s(4769),C=s(6286);function _(c,b){if(1&c){const e=t.EpF();t.TgZ(0,"div",14)(1,"div",15),t._UZ(2,"img",16),t.qZA(),t.TgZ(3,"div",17)(4,"div")(5,"h5",18),t._uU(6),t.qZA(),t.TgZ(7,"h6",18),t._uU(8),t.qZA(),t.TgZ(9,"button",19,20),t.NdJ("click",function(){const o=t.CHM(e).$implicit,a=t.MAs(10),u=t.oxw(2);return t.KtG(u.removeItem(o.product.id,a))}),t._UZ(11,"i",21),t._uU(12," Remove "),t.qZA()(),t.TgZ(13,"div")(14,"button",22,23),t.NdJ("click",function(){const o=t.CHM(e).$implicit,a=t.MAs(15),u=t.MAs(20),g=t.oxw(2);return t.KtG(g.updataCart(o.product.id,o.count+1,a,u))}),t._uU(16,"+"),t.qZA(),t.TgZ(17,"span",24),t._uU(18),t.qZA(),t.TgZ(19,"button",22,25),t.NdJ("click",function(){const o=t.CHM(e).$implicit,a=t.MAs(15),u=t.MAs(20),g=t.oxw(2);return t.KtG(g.updataCart(o.product.id,o.count-1,a,u))}),t._uU(21,"-"),t.qZA()()()()}if(2&c){const e=b.$implicit;t.xp6(2),t.Q6J("src",e.product.imageCover,t.LSH)("alt",e.product.title),t.xp6(4),t.Oqu(e.product.title),t.xp6(2),t.hij("",e.price," EGP"),t.xp6(10),t.Oqu(e.count)}}const h=function(c){return["/payment",c]};function i(c,b){if(1&c){const e=t.EpF();t.TgZ(0,"section",2)(1,"div",3)(2,"h1",4),t._uU(3,"Cart Shop"),t.qZA(),t.TgZ(4,"button",5),t._uU(5,"check out"),t.qZA()(),t.TgZ(6,"div",6)(7,"p",7),t._UZ(8,"i",8),t._uU(9," Total Price: "),t.TgZ(10,"span",9),t._uU(11),t.qZA(),t._uU(12," EGP "),t.qZA(),t.TgZ(13,"h3",7),t._UZ(14,"i",10),t._uU(15," Total Number Of Items: "),t.TgZ(16,"span",9),t._uU(17),t.qZA()()(),t.YNc(18,_,22,5,"div",11),t.TgZ(19,"div",12)(20,"button",13),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.Clear())}),t._uU(21," Clear All Cart "),t.qZA()()()}if(2&c){const e=t.oxw();t.xp6(4),t.Q6J("routerLink",t.VKq(4,h,e.cart.data._id)),t.xp6(7),t.Oqu(e.cart.data.totalCartPrice),t.xp6(6),t.Oqu(e.cart.numOfCartItems),t.xp6(1),t.Q6J("ngForOf",e.cart.data.products)}}function l(c,b){1&c&&(t.TgZ(0,"div",26)(1,"h2",27),t._uU(2,"No data available at the moment"),t._UZ(3,"span",28),t.qZA()())}let v=(()=>{class c{constructor(e,n){this._CartService=e,this._Renderer2=n,this.cart=null}ngOnInit(){this.getCart()}getCart(){this._CartService.getCartUser().subscribe({next:e=>{console.log(e),this.cart=e},error:e=>{console.log(e)}})}updataCart(e,n,r,o){n>0?(r&&o&&(this._Renderer2.setAttribute(r,"disabled","true"),this._Renderer2.setAttribute(o,"disabled","true")),this._CartService.UpdataCartProductQuantity(e,n).subscribe({next:a=>{console.log(a),this.cart=a,r&&o&&(this._Renderer2.removeAttribute(r,"disabled"),this._Renderer2.removeAttribute(o,"disabled"))},error:a=>{console.log(a),r&&o&&(this._Renderer2.removeAttribute(r,"disabled"),this._Renderer2.removeAttribute(o,"disabled"))}})):this.removeItem(e)}removeItem(e,n){n&&this._Renderer2.setAttribute(n,"disabled","true"),this._CartService.removeItem(e).subscribe({next:r=>{console.log(r),this.cart=r,n&&(this._Renderer2.removeAttribute(n,"disabled"),this._CartService.cartNumber.next(r.numOfCartItems))},error:r=>{console.log(r),n&&this._Renderer2.removeAttribute(n,"disabled")}})}Clear(){this._CartService.ClearCart().subscribe({next:e=>{"success"===e.message&&(this.cart=null,this._CartService.cartNumber.next(0))}})}static#t=this.\u0275fac=function(n){return new(n||c)(t.Y36(C.N),t.Y36(t.Qsj))};static#e=this.\u0275cmp=t.Xpm({type:c,selectors:[["app-cart"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","container py-5 my-5 p-5 bg-main-light rounded",4,"ngIf","ngIfElse"],["message",""],[1,"container","py-5","my-5","p-5","bg-main-light","rounded"],[1,"d-flex","justify-content-between","mb-4"],[1,"h2","fw-bold"],[1,"btn","btn-primary","btn-lg",3,"routerLink"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-black","fs-5","fw-bold"],[1,"fas","fa-money-bill-wave","text-dark"],[1,"text-main","fs-4"],[1,"fas","fa-calculator"],["class","row border-bottom my-3 d-flex align-items-center p-2",4,"ngFor","ngForOf"],[1,"text-center","my-5"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"row","border-bottom","my-3","d-flex","align-items-center","p-2"],[1,"col-md-2"],[1,"w-100",3,"src","alt"],[1,"col-md-10","d-flex","justify-content-between"],[1,"fw-bold"],[1,"btn","btn-sm","m-0","p-0","text-danger",3,"click"],["btnRemove",""],[1,"fas","fa-trash-can"],[1,"btn","btn-count","btn-md",3,"click"],["BTN1",""],[1,"mx-3"],["BTN2",""],[1,"text-center","py-5"],[1,"text-danger"],[1,"loading-dots"]],template:function(n,r){if(1&n&&(t.YNc(0,i,22,6,"section",0),t.YNc(1,l,4,0,"ng-template",null,1,t.W1O)),2&n){const o=t.MAs(2);t.Q6J("ngIf",r.cart)("ngIfElse",o)}},dependencies:[d.ez,d.sg,d.O5,p.rH],styles:['.btn-count[_ngcontent-%COMP%]{border:#22db14 1px solid}.text-center[_ngcontent-%COMP%]{font-family:Arial,sans-serif}.loading-dots[_ngcontent-%COMP%]:after{content:"";display:inline-block;width:1em;text-align:left;animation:_ngcontent-%COMP%_dots 1.5s steps(4,end) infinite}@keyframes _ngcontent-%COMP%_dots{0%,20%{content:""}40%{content:"..."}60%{content:"...."}80%,to{content:"......"}}.btn-count.btn-md[_ngcontent-%COMP%]{background-color:#ff69b4;color:#fff;border:none}.btn-count.btn-md[_ngcontent-%COMP%]:disabled{background-color:#6c757d;color:#fff;cursor:not-allowed;opacity:.65}.text-center[_ngcontent-%COMP%]{text-align:center}.btn-outline-danger[_ngcontent-%COMP%]{border-color:#dc354667;color:#dc3545;background-color:transparent;font-size:150%}.btn-outline-danger[_ngcontent-%COMP%]:hover{background-color:#dc3546;color:#fff}']})}return c})()},6286:(f,m,s)=>{s.d(m,{N:()=>C});var d=s(5619),p=s(4769),t=s(9862);let C=(()=>{class _{constructor(i){this._HttpClient=i,this.baseUrl="https://ecommerce.routemisr.com/api/v1/",this.cartNumber=new d.X(0)}AddToCart(i){return this._HttpClient.post(this.baseUrl+"cart",{productId:i})}getCartUser(){return this._HttpClient.get(this.baseUrl+"cart")}UpdataCartProductQuantity(i,l){return this._HttpClient.put(this.baseUrl+`cart/${i}`,{count:l})}removeItem(i){return this._HttpClient.delete(this.baseUrl+`cart/${i}`)}ClearCart(){return this._HttpClient.delete(this.baseUrl+"cart")}CheckOut(i,l){return this._HttpClient.post(this.baseUrl+`orders/checkout-session/${i}?url=http://localhost:4200`,{shippingAddress:l})}static#t=this.\u0275fac=function(l){return new(l||_)(p.LFG(t.eN))};static#e=this.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()}}]);